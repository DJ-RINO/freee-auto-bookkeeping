# 🤖 freee自動経理システム 完全自動修正プロンプト

## 概要
このプロンプトは、freee自動経理システムのエラーと修正を自動化するために設計されています。GitHub IssueやコメントでClaude AIを呼び出し、エラー分析から修正まで完全自動実行します。

---

## 🔥 メインプロンプト

```markdown
@claude freee自動経理システムの自動診断と修正を実行してください。

### 📊 現在の状況分析
1. **最新のGitHub Actions結果を分析**
   - https://github.com/DJ-RINO/freee-auto-bookkeeping/actions
   - 実行ログから以下を特定：
     - エラーメッセージとスタックトレース  
     - 自動紐付け件数（現在0件の問題）
     - 手動対応件数とその理由
     - APIエラーの有無

2. **システム健全性チェック**
   - freee APIの接続状態
   - 学習システムの動作状況
   - マッチングアルゴリズムの精度
   - 設定ファイルの妥当性

### 🛠️ 自動修正タスク
以下の優先順位で修正を実行：

#### 【最優先】エラー撲滅
- [ ] NoneType errors の完全除去
- [ ] API呼び出し失敗の修正
- [ ] 学習システムのバグ修正
- [ ] 設定ファイルの不整合解決

#### 【高優先】マッチング精度向上
- [ ] 閾値の現実的調整（70点以上で自動、50-69点でアシスト）
- [ ] 学習システムの精度改善
- [ ] 金額・日付許容範囲の最適化
- [ ] 店舗名正規化ロジックの強化

#### 【中優先】パフォーマンス最適化  
- [ ] API呼び出し数の削減
- [ ] 並列処理の導入
- [ ] 不要なログ出力の削減
- [ ] メモリ使用量の最適化

#### 【低優先】機能拡張
- [ ] 新しい学習パターンの追加
- [ ] より詳細なデバッグ情報
- [ ] Slack通知の改善
- [ ] エラーハンドリングの強化

### 🔍 具体的な修正指針

1. **マッチングアルゴリズム**
```python
# 目標: 自動紐付け率を30%以上に向上
- 現在の問題: 全て手動対応（0%）
- 改善点: 閾値調整、学習データ活用、許容範囲拡大
```

2. **学習システム**  
```python
# 目標: 過学習や不正マッチの除去
- 現在の問題: "None"への過剰反応
- 改善点: データ品質向上、フィルタリング強化
```

3. **設定最適化**
```yaml
# 目標: 現実的なビジネス要件に合わせた調整
- 金額許容範囲: 1000円または5%
- 日付許容範囲: 45日（請求・支払のずれ考慮）
- 自動閾値: 70点（現実的な値）
```

### 📋 実行後の確認事項
修正完了後、以下を自動検証：

1. **動作テスト**
   - [ ] GitHub Actionsが正常実行される
   - [ ] エラーが発生しない
   - [ ] 自動紐付け件数が1件以上

2. **品質保証**
   - [ ] テストケースが全て通る
   - [ ] コードレビュー基準を満たす
   - [ ] セキュリティ要件を満たす

3. **パフォーマンス**
   - [ ] 実行時間が改善される
   - [ ] メモリ使用量が適切
   - [ ] API呼び出し数が最適化される

### 🚀 継続改善プロセス
修正後も以下のサイクルを継続：

1. **監視**: GitHub Actions結果の定期チェック
2. **分析**: 問題パターンの特定と学習
3. **改善**: 設定調整やアルゴリズム改良
4. **検証**: 改善効果の測定と評価

---

**重要**: このプロンプトは完全自動実行を想定しています。人間の介入なしに、エラー特定→修正→テスト→デプロイまでを自動化してください。

**最終目標**: 
- 🎯 自動紐付け率: 30%以上
- 🎯 エラー発生率: 0%  
- 🎯 実行時間: 3分以内
- 🎯 API効率: 50%削減
```

---

## 📞 緊急時プロンプト

```markdown
@claude 🚨 緊急修正が必要です！

freee自動経理システムが完全停止しています。以下を最優先で修正してください：

1. **即座に実行**: エラー原因の特定と緊急修正
2. **5分以内**: システムの復旧
3. **10分以内**: 動作テストと検証

現在の症状:
- GitHub Actions: [エラー内容]
- API状態: [接続状況] 
- ログ: [エラーメッセージ]

**制約**: 本番環境への影響を最小限に抑えつつ、迅速に復旧してください。
```

---

## 🔄 定期メンテナンスプロンプト

```markdown
@claude 週次メンテナンスを実行してください。

### 今週のタスク
1. GitHub Actions履歴の分析（過去7日間）
2. 学習データの品質チェックと清浄化
3. パフォーマンス指標の測定と改善
4. 新しい取引パターンの学習データ追加
5. 設定ファイルの最適化提案

### レポート出力
- 週次改善レポートをIssueコメントで出力
- 次週の改善計画を提案
- 潜在的なリスクの早期警告
```